<?xml version="1.0"?>
<launch>
  <!-- Launch simulation -->
  <include file="$(find sim_pkg)/launch/sim.launch"/>
  
  <!-- Launch tracker -->
  <include file="$(find tracker_pkg)/launch/tracker.launch"/>

  <!-- Simple circular motion for the demo -->
  <node name="robot_motion" pkg="sim_pkg" type="move_robot.py" output="screen" required="false">
    <param name="model_name" value="robot_with_markers"/>
    <param name="radius" value="0.6"/>
    <param name="angular_speed" value="0.35"/>
    <param name="z" value="0.1"/>
  </node>
  
  <!-- Launch RViz with config -->
  <node name="rviz" pkg="rviz" type="rviz" 
        args="-d $(find tracker_pkg)/rviz/tracker.rviz" 
        output="screen" required="false"/>

  <!-- Show debug image automatically -->
  <node name="debug_image_view" pkg="rqt_image_view" type="rqt_image_view"
        args="/debug/image"
        output="screen" required="false"/>
  
  <!-- Expected topics after launch:
       /camera/image_raw
       /camera/camera_info
       /robot_pose_external
       /robot_path_external
       /debug/image
  -->
</launch>
